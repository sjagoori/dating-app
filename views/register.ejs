<!DOCTYPE html>
<html lang="en">

  <%- include('partials/head', {
    title: "Register",
    css: "login"
  })%>

  <body>
    <main>
      <form action="/register/2" method="post" name="registerForm" onsubmit="return validateForm()" class="c-login">
        <div class="c-login-container">
          <% if (typeof query !== 'undefined') { %>
            <h1 class="c-login__greeting warning"> <%= query.errorMessage %> </h1>
          <% } else { %>
            <h1 class="c-login__greeting">Register here!</h1>
          <% } %>
          <div class="c-login__input-container">
            <label for="fname">First name:</label>
            <input type="text" name="fname" id="fname" autocomplete="off" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" required>

            <label for="lname">Last name:</label>
            <input type="text" name="lname" id="lname" autocomplete="off" pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" required>

            <label for="email">Email:</label>
            <input type="email" name="email" id="email" autocomplete="off" pattern="^\S+@\S+\.\S+$" required>

            <label for="password">Password:</label>
            <input type="password" name="password" id="password" pattern="^[a-zA-Z0-9]+$" required>

            <label for="password">Repeat your password:</label>
            <input type="password" name="rpassword" id="rpassword" pattern="^[a-zA-Z0-9]+$" required>
          </div>
          <div class="c-login__button-container">
            <a class="button--secondary" href="/">Cancel</a>
            <button type="submit">Next</button>
          </div>
        </div>
      </form>
    </main>

  </body>
  <script>
    function validateForm(){
      let x = document.forms["registerForm"]["password"];
      let y = document.forms["registerForm"]["rpassword"];

      let errorMessage = document.createElement("span");
      errorMessage.textContent = 'Password does not match.'
      errorMessage.style.color = '#FF0000'

      if (x.value === y.value){
        return
      }else{
        y.after(errorMessage)
        return false
      }
    }
  </script>

</html>
